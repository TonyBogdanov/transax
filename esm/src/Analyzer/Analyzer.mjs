import Logger from"../Logger/Logger.mjs";import parse from"./peg.mjs";class Options{constructor(e={}){var o;this.names=null!=(o=e.names)?o:["$t"],this.keyFormatter=null!=(o=e.keyFormatter)?o:e=>e,this.logger=null!=(o=e.logger)?o:new Logger({namespace:"TRANSAX:ANALYZER"})}}export default class Analyzer{skip(e,o){o=o?`in: ${o}::${e.line}:${e.column}.`:`at: ${e.line}:${e.column}.`;this.options.logger.verbose(`Skipping ${e.text} because: "${e.name}" isn't in the list of allowed names `+o)}constructor(e={}){this.options=new Options(e)}analyze(e,o){this.options.logger.log(`Analyzing: ${o||"[inline code]"}.`);var s=[];for(const t of parse(e))-1===this.options.names.indexOf(t.name)?this.skip(t,o):(t.source=o,t.key=this.options.keyFormatter(t.key,t),s.push(t));return s}}