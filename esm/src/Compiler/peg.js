import TextToken from"./TextToken";import LiteralToken from"./LiteralToken";import TernaryExpressionToken from"./TernaryExpressionToken";import ComparisonExpressionToken from"./ComparisonExpressionToken";import CallExpressionToken,{CallExpressionArrayAccess,CallExpressionInvocation,CallExpressionObjectAccess}from"./CallExpressionToken";const peggyParser=function(){"use strict";function Mr(t,r,e,n){t=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(t,Mr.prototype),t.expected=r,t.found=e,t.location=n,t.name="SyntaxError",t}function t(){this.constructor=r}var r,e;function l(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,t+(e+=e.repeat(r)).slice(0,r))}return r=Mr,e=Error,t.prototype=e.prototype,r.prototype=new t,Mr.prototype.format=function(t){var r="Error: "+this.message;if(this.location){for(var e=null,n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var o,a,c,s=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,i=this.location.source+":"+u.line+":"+u.column;e?(c=this.location.end,o=l("",u.line.toString().length," "),a=e[s.line-1],c=(s.line===c.line?c.column:a.length+1)-s.column||1,r+="\n --\x3e "+i+"\n"+o+" |\n"+u.line+" | "+a+"\n"+o+" | "+l("",s.column-1," ")+l("",c,"^")):r+="\n at "+i}return r},Mr.buildMessage=function(t,r){var e={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r=t.parts.map(function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)});return"["+(t.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function c(t){return e[t.type](t)}return"Expected "+function(t){var r,e,n=t.map(c);if(n.sort(),0<n.length){for(e=r=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+((t=r)?'"'+o(t)+'"':"end of input")+" found."},{SyntaxError:Mr,parse:function(l,t){function z(t,r){return[t,...r.map(([,,,t])=>t)]}function Z(t){return[t[0],...t[1]].join("")}function _(t){return t.map(t=>-1<["\\'","\\\\"].indexOf(t)?t[1]:t).join("")}function I(t){return t.map(t=>-1<['\\"',"\\\\"].indexOf(t)?t[1]:t).join("")}function M(t){return t.map(([,t])=>-1<["\\`","\\\\"].indexOf(t)?t[1]:t).join("")}var h={},a=(t=void 0!==t?t:{}).grammarSource,r={Start:Lr},N=Lr,q="{{",B="}}",u="(",i=")",D="?",G=":",H="@",f=".",J="[",K="]",Q=",",V="null",W="NULL",X="true",Y="TRUE",tt="false",rt="FALSE",et="'",c="\\'",s="\\\\",nt='"',A='\\"',ot="`",p="${",d="\\`",at="0",ct="e",st="==",o="=",ut="===",it="!=",lt="!==",ht=">",ft=">=",At="<",pt="<=",dt=/^[ \t\r\n]/,Ct=/^[a-zA-Z_$]/,C=/^[a-zA-Z0-9_$]/,gt=/^[^']/,vt=/^[^"]/,xt=/^[^`]/,g=/^[0-9]/,v=/^[+\-]/,bt=/^[1-9]/,mt=O("{{",!1),yt=O("}}",!1),Et={type:"any"},x=O("(",!1),b=O(")",!1),Tt=O("?",!1),wt=O(":",!1),kt=O("@",!1),m=O(".",!1),Lt=O("[",!1),Ft=O("]",!1),St=O(",",!1),jt=P([" ","\t","\r","\n"],!1,!1),Ot=P([["a","z"],["A","Z"],"_","$"],!1,!1),y=P([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1),Pt=O("null",!1),Rt=O("NULL",!1),$t=O("true",!1),Ut=O("TRUE",!1),zt=O("false",!1),Zt=O("FALSE",!1),_t=O("'",!1),It=O("\\'",!1),E=O("\\\\",!1),Mt=P(["'"],!0,!1),Nt=O('"',!1),qt=O('\\"',!1),Bt=P(['"'],!0,!1),Dt=O("`",!1),Gt=O("${",!1),Ht=O("\\`",!1),Jt=P(["`"],!0,!1),T=P([["0","9"]],!1,!1),w=P(["+","-"],!1,!1),Kt=O("0",!1),Qt=P([["1","9"]],!1,!1),Vt=O("e",!0),Wt=O("==",!1),k=O("=",!1),Xt=O("===",!1),Yt=O("!=",!1),tr=O("!==",!1),rr=O(">",!1),er=O(">=",!1),nr=O("<",!1),or=O("<=",!1),ar=function(t){return t},cr=function(){return[]},sr=function(t){return t},ur=function(){return new TextToken(n(),j())},ir=function(t,r,e){return new TernaryExpressionToken(t,r,e,n(),j())},lr=function(t,r,e){return new ComparisonExpressionToken(t,e,r,n(),j())},hr=function(t,r,e){return new CallExpressionObjectAccess(e)},fr=function(t,r,e){return new CallExpressionArrayAccess(e)},Ar=function(t,r,e){return new CallExpressionInvocation(null!=e?e:[])},pr=function(t,r,e){return new CallExpressionToken("@"===t,r,e,n(),j())},dr=function(t){return new LiteralToken(t,n(),j())},Cr=function(t){return new LiteralToken(t,n(),j())},gr=function(t){return new LiteralToken(t,n(),j())},vr=function(t){return new LiteralToken(t,n(),j())},xr=function(){return parseFloat(n())},br=function(){return parseFloat(n())},mr=function(){return parseFloat(n())},L=0,F=0,yr=[{line:1,column:1}],e=0,Er=[],S=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');N=r[t.startRule]}function n(){return l.substring(F,L)}function j(){return wr(F,L)}function O(t,r){return{type:"literal",text:t,ignoreCase:r}}function P(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Tr(t){var r,e=yr[t];if(e)return e;for(r=t-1;!yr[r];)r--;for(e={line:(e=yr[r]).line,column:e.column};r<t;)10===l.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return yr[t]=e}function wr(t,r,e){var n=Tr(t),o=Tr(r),t={source:a,start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:o.line,column:o.column}};return e&&a&&"function"==typeof a.offset&&(t.start=a.offset(t.start),t.end=a.offset(t.end)),t}function R(t){L<e||(e<L&&(e=L,Er=[]),Er.push(t))}function kr(t,r,e){return new Mr(Mr.buildMessage(t,r),t,r,e)}function Lr(){var t=L,r=[],e=Fr();if((e=e===h?Sr():e)!==h)for(;e!==h;)r.push(e),(e=Fr())===h&&(e=Sr());else r=h;return r!==h&&(F=t,r=ar(r)),(t=r)===h&&(r="",F=t=L,t=r=cr()),t}function Fr(){var t,r,e=L;return l.substr(L,2)===q?(t=q,L+=2):(t=h,0===S&&R(mt)),e=t!==h&&(U(),(t=$())!==h)&&(U(),l.substr(L,2)===B?(r=B,L+=2):(r=h,0===S&&R(yt)),r!==h)?(F=e,sr(t)):(L=e,h)}function Sr(){var t,r=L;return l.length>L?(t=l.charAt(L),L++):(t=h,0===S&&R(Et)),t!==h&&(F=r,t=ur()),t}function $(){var t=Pr();return t=t===h&&(t=Rr())===h&&(t=$r())===h?zr():t}function jr(){var t,r,e=L;return 40===l.charCodeAt(L)?(t=u,L++):(t=h,0===S&&R(x)),e=(e=t!==h&&(U(),(t=Pr())!==h)&&(U(),41===l.charCodeAt(L)?(r=i,L++):(r=h,0===S&&R(b)),r!==h)?(F=e,t):(L=e,h))===h&&(e=Rr())===h&&(e=$r())===h?zr():e}function Or(){var t,r,e,n=L;return 40===l.charCodeAt(L)?(t=u,L++):(t=h,0===S&&R(x)),n=(n=t!==h&&(U(),(r=Pr())!==h)&&(U(),41===l.charCodeAt(L)?(e=i,L++):(e=h,0===S&&R(b)),e!==h)?(F=n,r):(L=n,h))===h&&(n=L,40===l.charCodeAt(L)?(t=u,L++):(t=h,0===S&&R(x)),(n=t!==h&&(U(),(r=Rr())!==h)&&(U(),41===l.charCodeAt(L)?(e=i,L++):(e=h,0===S&&R(b)),e!==h)?(F=n,r):(L=n,h))===h)&&(n=$r())===h?zr():n}function Pr(){var t,r,e=L,n=jr();return e=n!==h&&(U(),63===l.charCodeAt(L)?(t=D,L++):(t=h,0===S&&R(Tt)),t!==h)&&(U(),(t=jr())!==h)&&(U(),58===l.charCodeAt(L)?(r=G,L++):(r=h,0===S&&R(wt)),r!==h)&&(U(),(r=jr())!==h)?(F=e,ir(n,t,r)):(L=e,h)}function Rr(){var t,r,e=L,n=Or();return e=n!==h&&(U(),(t=function(){var t,r,e,n;t=L,l.substr(L,2)===st?(r=st,L+=2):(r=h,0===S&&R(Wt));t=r!==h&&(e=L,S++,61===l.charCodeAt(L)?(n=o,L++):(n=h,0===S&&R(k)),S--,e=n===h?void 0:(L=e,h),e!==h)?(F=t,r):(L=t,h);t===h&&(l.substr(L,3)===ut?(t=ut,L+=3):(t=h,0===S&&R(Xt)),t===h)&&(t=L,l.substr(L,2)===it?(r=it,L+=2):(r=h,0===S&&R(Yt)),(t=r!==h&&(e=L,S++,61===l.charCodeAt(L)?(n=o,L++):(n=h,0===S&&R(k)),S--,(e=n===h?void 0:(L=e,h))!==h)?(F=t,r):(L=t,h))===h)&&(l.substr(L,3)===lt?(t=lt,L+=3):(t=h,0===S&&R(tr)),t===h)&&(t=L,62===l.charCodeAt(L)?(r=ht,L++):(r=h,0===S&&R(rr)),(t=r!==h&&(e=L,S++,61===l.charCodeAt(L)?(n=o,L++):(n=h,0===S&&R(k)),S--,(e=n===h?void 0:(L=e,h))!==h)?(F=t,r):(L=t,h))===h)&&(l.substr(L,2)===ft?(t=ft,L+=2):(t=h,0===S&&R(er)),t===h)&&(t=L,60===l.charCodeAt(L)?(r=At,L++):(r=h,0===S&&R(nr)),(t=r!==h&&(e=L,S++,61===l.charCodeAt(L)?(n=o,L++):(n=h,0===S&&R(k)),S--,(e=n===h?void 0:(L=e,h))!==h)?(F=t,r):(L=t,h))===h)&&(l.substr(L,2)===pt?(t=pt,L+=2):(t=h,0===S&&R(or)));return t}())!==h)&&(U(),(r=Or())!==h)?(F=e,lr(n,t,r)):(L=e,h)}function $r(){var t,r,e,n,o,a,c,s=L;if(64===l.charCodeAt(L)?(t=H,L++):(t=h,0===S&&R(kt)),t===h&&(t=null),(r=Zr())!==h){for(e=[],n=L,U(),46===l.charCodeAt(L)?(o=f,L++):(o=h,0===S&&R(m)),(n=o!==h&&(U(),(a=Zr())!==h)?(F=n,hr(t,r,a)):(L=n,h))===h&&(n=L,U(),91===l.charCodeAt(L)?(o=J,L++):(o=h,0===S&&R(Lt)),(n=o!==h&&(U(),(a=$())!==h)&&(U(),93===l.charCodeAt(L)?(c=K,L++):(c=h,0===S&&R(Ft)),c!==h)?(F=n,fr(t,r,a)):(L=n,h))===h)&&(n=L,U(),40===l.charCodeAt(L)?(o=u,L++):(o=h,0===S&&R(x)),n=o!==h&&(U(),(a=Ur())===h&&(a=null),U(),41===l.charCodeAt(L)?(c=i,L++):(c=h,0===S&&R(b)),c!==h)?(F=n,Ar(t,r,a)):(L=n,h));n!==h;)e.push(n),n=L,U(),46===l.charCodeAt(L)?(o=f,L++):(o=h,0===S&&R(m)),(n=o!==h&&(U(),(a=Zr())!==h)?(F=n,hr(t,r,a)):(L=n,h))===h&&(n=L,U(),91===l.charCodeAt(L)?(o=J,L++):(o=h,0===S&&R(Lt)),(n=o!==h&&(U(),(a=$())!==h)&&(U(),93===l.charCodeAt(L)?(c=K,L++):(c=h,0===S&&R(Ft)),c!==h)?(F=n,fr(t,r,a)):(L=n,h))===h)&&(n=L,U(),40===l.charCodeAt(L)?(o=u,L++):(o=h,0===S&&R(x)),n=o!==h&&(U(),(a=Ur())===h&&(a=null),U(),41===l.charCodeAt(L)?(c=i,L++):(c=h,0===S&&R(b)),c!==h)?(F=n,Ar(t,r,a)):(L=n,h));F=s,s=pr(t,r,e)}else L=s,s=h;return s}function Ur(){var t,r,e,n,o,a,c=L,s=$();if(s!==h){for(t=[],r=L,e=U(),44===l.charCodeAt(L)?(n=Q,L++):(n=h,0===S&&R(St)),r=n!==h&&(o=U(),(a=$())!==h)?e=[e,n,o,a]:(L=r,h);r!==h;)t.push(r),r=L,e=U(),44===l.charCodeAt(L)?(n=Q,L++):(n=h,0===S&&R(St)),r=n!==h&&(o=U(),(a=$())!==h)?e=[e,n,o,a]:(L=r,h);F=c,c=z(s,t)}else L=c,c=h;return c}function zr(){var t=L,r=_r();return r!==h&&(F=t,r=dr(r)),(t=r)===h&&(t=L,(r=Ir())!==h&&(F=t,r=Cr(r)),(t=r)===h)&&(t=L,(r=function(){var t,r,e,n;t=L,t=(r=function(){var t,r,e,n,o,a,c,s,u,i;t=L,v.test(l.charAt(L))?(r=l.charAt(L),L++):(r=h,0===S&&R(w));r===h&&(r=null);48===l.charCodeAt(L)?(e=at,L++):(e=h,0===S&&R(Kt));if(e===h)if(e=L,bt.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Qt)),n!==h){for(o=[],g.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(T));a!==h;)o.push(a),g.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(T));e=n=[n,o]}else L=e,e=h;if(e!==h)if(46===l.charCodeAt(L)?(n=f,L++):(n=h,0===S&&R(m)),n!==h){for(o=[],g.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(T));a!==h;)o.push(a),g.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(T));if(a=L,l.substr(L,1).toLowerCase()===ct?(c=l.charAt(L),L++):(c=h,0===S&&R(Vt)),c!==h){if(v.test(l.charAt(L))?(s=l.charAt(L),L++):(s=h,0===S&&R(w)),s===h&&(s=null),u=[],g.test(l.charAt(L))?(i=l.charAt(L),L++):(i=h,0===S&&R(T)),i!==h)for(;i!==h;)u.push(i),g.test(l.charAt(L))?(i=l.charAt(L),L++):(i=h,0===S&&R(T));else u=h;a=u!==h?c=[c,s,u]:(L=a,h)}else L=a,a=h;a===h&&(a=null),F=t,t=xr()}else L=t,t=h;else L=t,t=h;if(t===h){if(t=L,v.test(l.charAt(L))?(r=l.charAt(L),L++):(r=h,0===S&&R(w)),r===h&&(r=null),46===l.charCodeAt(L)?(e=f,L++):(e=h,0===S&&R(m)),e!==h){if(n=[],g.test(l.charAt(L))?(o=l.charAt(L),L++):(o=h,0===S&&R(T)),o!==h)for(;o!==h;)n.push(o),g.test(l.charAt(L))?(o=l.charAt(L),L++):(o=h,0===S&&R(T));else n=h;if(n!==h){if(o=L,l.substr(L,1).toLowerCase()===ct?(a=l.charAt(L),L++):(a=h,0===S&&R(Vt)),a!==h){if(v.test(l.charAt(L))?(c=l.charAt(L),L++):(c=h,0===S&&R(w)),c===h&&(c=null),s=[],g.test(l.charAt(L))?(u=l.charAt(L),L++):(u=h,0===S&&R(T)),u!==h)for(;u!==h;)s.push(u),g.test(l.charAt(L))?(u=l.charAt(L),L++):(u=h,0===S&&R(T));else s=h;o=s!==h?a=[a,c,s]:(L=o,h)}else L=o,o=h;o===h&&(o=null),F=t,t=br()}else L=t,t=h}else L=t,t=h;if(t===h){if(t=L,v.test(l.charAt(L))?(r=l.charAt(L),L++):(r=h,0===S&&R(w)),r===h&&(r=null),48===l.charCodeAt(L)?(e=at,L++):(e=h,0===S&&R(Kt)),e===h)if(e=L,bt.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Qt)),n!==h){for(o=[],g.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(T));a!==h;)o.push(a),g.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(T));e=n=[n,o]}else L=e,e=h;if(e!==h){if(n=L,l.substr(L,1).toLowerCase()===ct?(o=l.charAt(L),L++):(o=h,0===S&&R(Vt)),o!==h){if(v.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(w)),a===h&&(a=null),c=[],g.test(l.charAt(L))?(s=l.charAt(L),L++):(s=h,0===S&&R(T)),s!==h)for(;s!==h;)c.push(s),g.test(l.charAt(L))?(s=l.charAt(L),L++):(s=h,0===S&&R(T));else c=h;n=c!==h?o=[o,a,c]:(L=n,h)}else L=n,n=h;n===h&&(n=null),F=t,t=mr()}else L=t,t=h}}return t}())!==h&&(e=L,S++,Ct.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Ot)),n===h&&(g.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(T))),S--,e=n===h?void 0:(L=e,h),e!==h)?(F=t,r):(L=t,h);return t}())!==h&&(F=t,r=gr(r)),(t=r)===h)&&(t=L,(r=function(){var t,r,e,n,o,a;t=L,39===l.charCodeAt(L)?(r=et,L++):(r=h,0===S&&R(_t));if(r!==h){for(e=[],l.substr(L,2)===c?(n=c,L+=2):(n=h,0===S&&R(It)),n===h&&(l.substr(L,2)===s?(n=s,L+=2):(n=h,0===S&&R(E)),n===h)&&(gt.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Mt)));n!==h;)e.push(n),l.substr(L,2)===c?(n=c,L+=2):(n=h,0===S&&R(It)),n===h&&(l.substr(L,2)===s?(n=s,L+=2):(n=h,0===S&&R(E)),n===h)&&(gt.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Mt)));39===l.charCodeAt(L)?(n=et,L++):(n=h,0===S&&R(_t)),t=n!==h?(F=t,_(e)):(L=t,h)}else L=t,t=h;if(t===h){if(t=L,34===l.charCodeAt(L)?(r=nt,L++):(r=h,0===S&&R(Nt)),r!==h){for(e=[],l.substr(L,2)===A?(n=A,L+=2):(n=h,0===S&&R(qt)),n===h&&(l.substr(L,2)===s?(n=s,L+=2):(n=h,0===S&&R(E)),n===h)&&(vt.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Bt)));n!==h;)e.push(n),l.substr(L,2)===A?(n=A,L+=2):(n=h,0===S&&R(qt)),n===h&&(l.substr(L,2)===s?(n=s,L+=2):(n=h,0===S&&R(E)),n===h)&&(vt.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(Bt)));34===l.charCodeAt(L)?(n=nt,L++):(n=h,0===S&&R(Nt)),t=n!==h?(F=t,I(e)):(L=t,h)}else L=t,t=h;if(t===h)if(t=L,96===l.charCodeAt(L)?(r=ot,L++):(r=h,0===S&&R(Dt)),r!==h){for(e=[],o=n=L,S++,l.substr(L,2)===p?(a=p,L+=2):(a=h,0===S&&R(Gt)),S--,o=a===h?void 0:(L=o,h),n=o!==h&&(l.substr(L,2)===d?(a=d,L+=2):(a=h,0===S&&R(Ht)),a===h&&(l.substr(L,2)===s?(a=s,L+=2):(a=h,0===S&&R(E)),a===h)&&(xt.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(Jt))),a!==h)?o=[o,a]:(L=n,h);n!==h;)e.push(n),o=n=L,S++,l.substr(L,2)===p?(a=p,L+=2):(a=h,0===S&&R(Gt)),S--,o=a===h?void 0:(L=o,h),n=o!==h&&(l.substr(L,2)===d?(a=d,L+=2):(a=h,0===S&&R(Ht)),a===h&&(l.substr(L,2)===s?(a=s,L+=2):(a=h,0===S&&R(E)),a===h)&&(xt.test(l.charAt(L))?(a=l.charAt(L),L++):(a=h,0===S&&R(Jt))),a!==h)?o=[o,a]:(L=n,h);96===l.charCodeAt(L)?(n=ot,L++):(n=h,0===S&&R(Dt)),t=n!==h?(F=t,M(e)):(L=t,h)}else L=t,t=h}return t}())!==h&&(F=t,r=vr(r)),t=r),t}function U(){var t,r=[];for(dt.test(l.charAt(L))?(t=l.charAt(L),L++):(t=h,0===S&&R(jt));t!==h;)r.push(t),dt.test(l.charAt(L))?(t=l.charAt(L),L++):(t=h,0===S&&R(jt));return r}function Zr(){var t,r,e,n,o=L,a=L;if(S++,t=function(){var t;(t=_r())===h&&(t=Ir());return t}(),S--,(a=t===h?void 0:(L=a,h))!==h){if(t=L,Ct.test(l.charAt(L))?(r=l.charAt(L),L++):(r=h,0===S&&R(Ot)),r!==h){for(e=[],C.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(y));n!==h;)e.push(n),C.test(l.charAt(L))?(n=l.charAt(L),L++):(n=h,0===S&&R(y));t=r=[r,e]}else L=t,t=h;o=t!==h?(F=o,Z(t)):(L=o,h)}else L=o,o=h;return o}function _r(){var t,r,e,n=L;return l.substr(L,4)===V?(t=V,L+=4):(t=h,0===S&&R(Pt)),(n=t!==h&&(r=L,S++,C.test(l.charAt(L))?(e=l.charAt(L),L++):(e=h,0===S&&R(y)),S--,(r=e===h?void 0:(L=r,h))!==h)?(F=n,null):(L=n,h))===h&&(n=L,l.substr(L,4)===W?(t=W,L+=4):(t=h,0===S&&R(Rt)),n=t!==h&&(r=L,S++,C.test(l.charAt(L))?(e=l.charAt(L),L++):(e=h,0===S&&R(y)),S--,(r=e===h?void 0:(L=r,h))!==h)?(F=n,null):(L=n,h)),n}function Ir(){var t,r,e,n=L;return l.substr(L,4)===X?(t=X,L+=4):(t=h,0===S&&R($t)),(n=t!==h&&(r=L,S++,C.test(l.charAt(L))?(e=l.charAt(L),L++):(e=h,0===S&&R(y)),S--,(r=e===h?void 0:(L=r,h))!==h)?(F=n,!0):(L=n,h))===h&&(n=L,l.substr(L,4)===Y?(t=Y,L+=4):(t=h,0===S&&R(Ut)),(n=t!==h&&(r=L,S++,C.test(l.charAt(L))?(e=l.charAt(L),L++):(e=h,0===S&&R(y)),S--,(r=e===h?void 0:(L=r,h))!==h)?(F=n,!0):(L=n,h))===h)&&(n=L,l.substr(L,5)===tt?(t=tt,L+=5):(t=h,0===S&&R(zt)),(n=t!==h&&(r=L,S++,C.test(l.charAt(L))?(e=l.charAt(L),L++):(e=h,0===S&&R(y)),S--,(r=e===h?void 0:(L=r,h))!==h)?(F=n,!1):(L=n,h))===h)&&(n=L,l.substr(L,5)===rt?(t=rt,L+=5):(t=h,0===S&&R(Zt)),n=t!==h&&(r=L,S++,C.test(l.charAt(L))?(e=l.charAt(L),L++):(e=h,0===S&&R(y)),S--,(r=e===h?void 0:(L=r,h))!==h)?(F=n,!1):(L=n,h)),n}if((r=N())!==h&&L===l.length)return r;throw r!==h&&L<l.length&&R({type:"end"}),kr(Er,e<l.length?l.charAt(e):null,e<l.length?wr(e,e+1):wr(e,e))}}}(),parse=(peggyParser.SyntaxError.prototype.name="PeggySyntaxError",peggyParser.parse),PeggySyntaxError=peggyParser.SyntaxError;export default parse;