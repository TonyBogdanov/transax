import TextToken from"./TextToken";import LiteralToken from"./LiteralToken";import ComparisonExpressionToken from"./ComparisonExpressionToken";import BracketSafeExpressionToken from"./BracketSafeExpressionToken";import CallExpressionToken,{CallExpressionArrayAccess,CallExpressionInvocation,CallExpressionObjectAccess}from"./CallExpressionToken";const peggyParser=function(){"use strict";function $r(t,r,e,n){t=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(t,$r.prototype),t.expected=r,t.found=e,t.location=n,t.name="SyntaxError",t}function t(){this.constructor=r}var r,e;function l(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,t+(e+=e.repeat(r)).slice(0,r))}return r=$r,e=Error,t.prototype=e.prototype,r.prototype=new t,$r.prototype.format=function(t){var r="Error: "+this.message;if(this.location){for(var e=null,n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var o,a,c,s=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,i=this.location.source+":"+u.line+":"+u.column;e?(c=this.location.end,o=l("",u.line.toString().length," "),a=e[s.line-1],c=(s.line===c.line?c.column:a.length+1)-s.column||1,r+="\n --\x3e "+i+"\n"+o+" |\n"+u.line+" | "+a+"\n"+o+" | "+l("",s.column-1," ")+l("",c,"^")):r+="\n at "+i}return r},$r.buildMessage=function(t,r){var e={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r=t.parts.map(function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)});return"["+(t.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function c(t){return e[t.type](t)}return"Expected "+function(t){var r,e,n=t.map(c);if(n.sort(),0<n.length){for(e=r=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+((t=r)?'"'+o(t)+'"':"end of input")+" found."},{SyntaxError:$r,parse:function(l,t){function z(t){return new BracketSafeExpressionToken(t,F(),j())}function Z(t,r){return[t,...r.map(([,,,t])=>t)]}function _(t){return[t[0],...t[1]].join("")}function B(t){return t.map(t=>-1<["\\'","\\\\"].indexOf(t)?t[1]:t).join("")}function I(t){return t.map(t=>-1<['\\"',"\\\\"].indexOf(t)?t[1]:t).join("")}function M(t){return t.map(([,t])=>-1<["\\`","\\\\"].indexOf(t)?t[1]:t).join("")}var h={},a=(t=void 0!==t?t:{}).grammarSource,r={Start:Er},N=Er,q="{{",D="}}",u="(",i=")",G="@",f=".",H="[",J="]",K=",",Q="null",V="NULL",W="true",X="TRUE",Y="false",tt="FALSE",rt="'",c="\\'",s="\\\\",et='"',A='\\"',nt="`",p="${",d="\\`",ot="0",g="e",at="==",o="=",ct="===",st="!=",ut="!==",it=">",lt=">=",ht="<",ft="<=",At=/^[ \t\r\n]/,pt=/^[a-zA-Z_$]/,C=/^[a-zA-Z0-9_$]/,dt=/^[^']/,gt=/^[^"]/,Ct=/^[^`]/,x=/^[0-9]/,v=/^[+\-]/,xt=/^[1-9]/,vt=O("{{",!1),bt=O("}}",!1),mt={type:"any"},yt=O("(",!1),Et=O(")",!1),Tt=O("@",!1),b=O(".",!1),kt=O("[",!1),wt=O("]",!1),Lt=O(",",!1),St=P([" ","\t","\r","\n"],!1,!1),Ft=P([["a","z"],["A","Z"],"_","$"],!1,!1),m=P([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1),jt=O("null",!1),Ot=O("NULL",!1),Pt=O("true",!1),Rt=O("TRUE",!1),$t=O("false",!1),Ut=O("FALSE",!1),zt=O("'",!1),Zt=O("\\'",!1),y=O("\\\\",!1),_t=P(["'"],!0,!1),Bt=O('"',!1),It=O('\\"',!1),Mt=P(['"'],!0,!1),Nt=O("`",!1),qt=O("${",!1),Dt=O("\\`",!1),Gt=P(["`"],!0,!1),E=P([["0","9"]],!1,!1),T=P(["+","-"],!1,!1),Ht=O("0",!1),Jt=P([["1","9"]],!1,!1),Kt=O("e",!0),Qt=O("==",!1),k=O("=",!1),Vt=O("===",!1),Wt=O("!=",!1),Xt=O("!==",!1),Yt=O(">",!1),tr=O(">=",!1),rr=O("<",!1),er=O("<=",!1),nr=function(t){return t},or=function(){return[]},ar=function(t){return t},cr=function(){return new TextToken(F(),j())},sr=function(t,r,e){return new ComparisonExpressionToken(t,e,r,F(),j())},ur=function(t,r,e){return new CallExpressionObjectAccess(e)},ir=function(t,r,e){return new CallExpressionArrayAccess(e)},lr=function(t,r,e){return new CallExpressionInvocation(null!=e?e:[])},hr=function(t,r,e){return new CallExpressionToken("@"===t,r,e,F(),j())},fr=function(t){return new LiteralToken(t,F(),j())},Ar=function(t){return new LiteralToken(t,F(),j())},pr=function(t){return new LiteralToken(t,F(),j())},dr=function(t){return new LiteralToken(t,F(),j())},gr=function(){return parseFloat(F())},Cr=function(){return parseFloat(F())},xr=function(){return parseFloat(F())},w=0,L=0,n=[{line:1,column:1}],e=0,vr=[],S=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');N=r[t.startRule]}function F(){return l.substring(L,w)}function j(){return mr(L,w)}function O(t,r){return{type:"literal",text:t,ignoreCase:r}}function P(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function br(t){var r,e=n[t];if(e)return e;for(r=t-1;!n[r];)r--;for(e={line:(e=n[r]).line,column:e.column};r<t;)10===l.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return n[t]=e}function mr(t,r,e){var n=br(t),o=br(r),t={source:a,start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:o.line,column:o.column}};return e&&a&&"function"==typeof a.offset&&(t.start=a.offset(t.start),t.end=a.offset(t.end)),t}function R(t){w<e||(e<w&&(e=w,vr=[]),vr.push(t))}function yr(t,r,e){return new $r($r.buildMessage(t,r),t,r,e)}function Er(){var t=w,r=[],e=Tr();if((e=e===h?kr():e)!==h)for(;e!==h;)r.push(e),(e=Tr())===h&&(e=kr());else r=h;return r!==h&&(L=t,r=nr(r)),(t=r)===h&&(r="",L=t=w,t=r=or()),t}function Tr(){var t,r,e=w;return l.substr(w,2)===q?(t=q,w+=2):(t=h,0===S&&R(vt)),e=t!==h&&(U(),(t=$())!==h)&&(U(),l.substr(w,2)===D?(r=D,w+=2):(r=h,0===S&&R(bt)),r!==h)?(L=e,ar(t)):(w=e,h)}function kr(){var t,r=w;return l.length>w?(t=l.charAt(w),w++):(t=h,0===S&&R(mt)),t!==h&&(L=r,t=cr()),t}function $(){var t=Lr();return t=t===h&&(t=Sr())===h?jr():t}function wr(){var t,r,e=w;return 40===l.charCodeAt(w)?(t=u,w++):(t=h,0===S&&R(yt)),e=(e=t!==h&&(U(),(t=Lr())!==h)&&(U(),41===l.charCodeAt(w)?(r=i,w++):(r=h,0===S&&R(Et)),r!==h)?(L=e,z(t)):(w=e,h))===h&&(e=Sr())===h?jr():e}function Lr(){var t,r,e=w,n=wr();return e=n!==h&&(U(),(t=function(){var t,r,e,n;t=w,l.substr(w,2)===at?(r=at,w+=2):(r=h,0===S&&R(Qt));t=r!==h&&(e=w,S++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===S&&R(k)),S--,e=n===h?void 0:(w=e,h),e!==h)?(L=t,r):(w=t,h);t===h&&(l.substr(w,3)===ct?(t=ct,w+=3):(t=h,0===S&&R(Vt)),t===h)&&(t=w,l.substr(w,2)===st?(r=st,w+=2):(r=h,0===S&&R(Wt)),(t=r!==h&&(e=w,S++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===S&&R(k)),S--,(e=n===h?void 0:(w=e,h))!==h)?(L=t,r):(w=t,h))===h)&&(l.substr(w,3)===ut?(t=ut,w+=3):(t=h,0===S&&R(Xt)),t===h)&&(t=w,62===l.charCodeAt(w)?(r=it,w++):(r=h,0===S&&R(Yt)),(t=r!==h&&(e=w,S++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===S&&R(k)),S--,(e=n===h?void 0:(w=e,h))!==h)?(L=t,r):(w=t,h))===h)&&(l.substr(w,2)===lt?(t=lt,w+=2):(t=h,0===S&&R(tr)),t===h)&&(t=w,60===l.charCodeAt(w)?(r=ht,w++):(r=h,0===S&&R(rr)),(t=r!==h&&(e=w,S++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===S&&R(k)),S--,(e=n===h?void 0:(w=e,h))!==h)?(L=t,r):(w=t,h))===h)&&(l.substr(w,2)===ft?(t=ft,w+=2):(t=h,0===S&&R(er)));return t}())!==h)&&(U(),(r=wr())!==h)?(L=e,sr(n,t,r)):(w=e,h)}function Sr(){var t,r,e,n,o,a,c,s=w;if(64===l.charCodeAt(w)?(t=G,w++):(t=h,0===S&&R(Tt)),t===h&&(t=null),(r=Or())!==h){for(e=[],n=w,U(),46===l.charCodeAt(w)?(o=f,w++):(o=h,0===S&&R(b)),(n=o!==h&&(U(),(a=Or())!==h)?(L=n,ur(t,r,a)):(w=n,h))===h&&(n=w,U(),91===l.charCodeAt(w)?(o=H,w++):(o=h,0===S&&R(kt)),(n=o!==h&&(U(),(a=$())!==h)&&(U(),93===l.charCodeAt(w)?(c=J,w++):(c=h,0===S&&R(wt)),c!==h)?(L=n,ir(t,r,a)):(w=n,h))===h)&&(n=w,U(),40===l.charCodeAt(w)?(o=u,w++):(o=h,0===S&&R(yt)),n=o!==h&&(U(),(a=Fr())===h&&(a=null),U(),41===l.charCodeAt(w)?(c=i,w++):(c=h,0===S&&R(Et)),c!==h)?(L=n,lr(t,r,a)):(w=n,h));n!==h;)e.push(n),n=w,U(),46===l.charCodeAt(w)?(o=f,w++):(o=h,0===S&&R(b)),(n=o!==h&&(U(),(a=Or())!==h)?(L=n,ur(t,r,a)):(w=n,h))===h&&(n=w,U(),91===l.charCodeAt(w)?(o=H,w++):(o=h,0===S&&R(kt)),(n=o!==h&&(U(),(a=$())!==h)&&(U(),93===l.charCodeAt(w)?(c=J,w++):(c=h,0===S&&R(wt)),c!==h)?(L=n,ir(t,r,a)):(w=n,h))===h)&&(n=w,U(),40===l.charCodeAt(w)?(o=u,w++):(o=h,0===S&&R(yt)),n=o!==h&&(U(),(a=Fr())===h&&(a=null),U(),41===l.charCodeAt(w)?(c=i,w++):(c=h,0===S&&R(Et)),c!==h)?(L=n,lr(t,r,a)):(w=n,h));L=s,s=hr(t,r,e)}else w=s,s=h;return s}function Fr(){var t,r,e,n,o,a,c=w,s=$();if(s!==h){for(t=[],r=w,e=U(),44===l.charCodeAt(w)?(n=K,w++):(n=h,0===S&&R(Lt)),r=n!==h&&(o=U(),(a=$())!==h)?e=[e,n,o,a]:(w=r,h);r!==h;)t.push(r),r=w,e=U(),44===l.charCodeAt(w)?(n=K,w++):(n=h,0===S&&R(Lt)),r=n!==h&&(o=U(),(a=$())!==h)?e=[e,n,o,a]:(w=r,h);L=c,c=Z(s,t)}else w=c,c=h;return c}function jr(){var t=w,r=Pr();return r!==h&&(L=t,r=fr(r)),(t=r)===h&&(t=w,(r=Rr())!==h&&(L=t,r=Ar(r)),(t=r)===h)&&(t=w,(r=function(){var t,r,e,n;t=w,t=(r=function(){var t,r,e,n,o,a,c,s,u,i;t=w,v.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===S&&R(T));r===h&&(r=null);48===l.charCodeAt(w)?(e=ot,w++):(e=h,0===S&&R(Ht));if(e===h)if(e=w,xt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(Jt)),n!==h){for(o=[],x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(E));a!==h;)o.push(a),x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(E));e=n=[n,o]}else w=e,e=h;if(e!==h)if(46===l.charCodeAt(w)?(n=f,w++):(n=h,0===S&&R(b)),n!==h){for(o=[],x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(E));a!==h;)o.push(a),x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(E));if(a=w,l.substr(w,1).toLowerCase()===g?(c=l.charAt(w),w++):(c=h,0===S&&R(Kt)),c!==h){if(v.test(l.charAt(w))?(s=l.charAt(w),w++):(s=h,0===S&&R(T)),s===h&&(s=null),u=[],x.test(l.charAt(w))?(i=l.charAt(w),w++):(i=h,0===S&&R(E)),i!==h)for(;i!==h;)u.push(i),x.test(l.charAt(w))?(i=l.charAt(w),w++):(i=h,0===S&&R(E));else u=h;a=u!==h?c=[c,s,u]:(w=a,h)}else w=a,a=h;a===h&&(a=null),L=t,t=gr()}else w=t,t=h;else w=t,t=h;if(t===h){if(t=w,v.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===S&&R(T)),r===h&&(r=null),46===l.charCodeAt(w)?(e=f,w++):(e=h,0===S&&R(b)),e!==h){if(n=[],x.test(l.charAt(w))?(o=l.charAt(w),w++):(o=h,0===S&&R(E)),o!==h)for(;o!==h;)n.push(o),x.test(l.charAt(w))?(o=l.charAt(w),w++):(o=h,0===S&&R(E));else n=h;if(n!==h){if(o=w,l.substr(w,1).toLowerCase()===g?(a=l.charAt(w),w++):(a=h,0===S&&R(Kt)),a!==h){if(v.test(l.charAt(w))?(c=l.charAt(w),w++):(c=h,0===S&&R(T)),c===h&&(c=null),s=[],x.test(l.charAt(w))?(u=l.charAt(w),w++):(u=h,0===S&&R(E)),u!==h)for(;u!==h;)s.push(u),x.test(l.charAt(w))?(u=l.charAt(w),w++):(u=h,0===S&&R(E));else s=h;o=s!==h?a=[a,c,s]:(w=o,h)}else w=o,o=h;o===h&&(o=null),L=t,t=Cr()}else w=t,t=h}else w=t,t=h;if(t===h){if(t=w,v.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===S&&R(T)),r===h&&(r=null),48===l.charCodeAt(w)?(e=ot,w++):(e=h,0===S&&R(Ht)),e===h)if(e=w,xt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(Jt)),n!==h){for(o=[],x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(E));a!==h;)o.push(a),x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(E));e=n=[n,o]}else w=e,e=h;if(e!==h){if(n=w,l.substr(w,1).toLowerCase()===g?(o=l.charAt(w),w++):(o=h,0===S&&R(Kt)),o!==h){if(v.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(T)),a===h&&(a=null),c=[],x.test(l.charAt(w))?(s=l.charAt(w),w++):(s=h,0===S&&R(E)),s!==h)for(;s!==h;)c.push(s),x.test(l.charAt(w))?(s=l.charAt(w),w++):(s=h,0===S&&R(E));else c=h;n=c!==h?o=[o,a,c]:(w=n,h)}else w=n,n=h;n===h&&(n=null),L=t,t=xr()}else w=t,t=h}}return t}())!==h&&(e=w,S++,pt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(Ft)),n===h&&(x.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(E))),S--,e=n===h?void 0:(w=e,h),e!==h)?(L=t,r):(w=t,h);return t}())!==h&&(L=t,r=pr(r)),(t=r)===h)&&(t=w,(r=function(){var t,r,e,n,o,a;t=w,39===l.charCodeAt(w)?(r=rt,w++):(r=h,0===S&&R(zt));if(r!==h){for(e=[],l.substr(w,2)===c?(n=c,w+=2):(n=h,0===S&&R(Zt)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===S&&R(y)),n===h)&&(dt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(_t)));n!==h;)e.push(n),l.substr(w,2)===c?(n=c,w+=2):(n=h,0===S&&R(Zt)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===S&&R(y)),n===h)&&(dt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(_t)));39===l.charCodeAt(w)?(n=rt,w++):(n=h,0===S&&R(zt)),t=n!==h?(L=t,B(e)):(w=t,h)}else w=t,t=h;if(t===h){if(t=w,34===l.charCodeAt(w)?(r=et,w++):(r=h,0===S&&R(Bt)),r!==h){for(e=[],l.substr(w,2)===A?(n=A,w+=2):(n=h,0===S&&R(It)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===S&&R(y)),n===h)&&(gt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(Mt)));n!==h;)e.push(n),l.substr(w,2)===A?(n=A,w+=2):(n=h,0===S&&R(It)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===S&&R(y)),n===h)&&(gt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(Mt)));34===l.charCodeAt(w)?(n=et,w++):(n=h,0===S&&R(Bt)),t=n!==h?(L=t,I(e)):(w=t,h)}else w=t,t=h;if(t===h)if(t=w,96===l.charCodeAt(w)?(r=nt,w++):(r=h,0===S&&R(Nt)),r!==h){for(e=[],o=n=w,S++,l.substr(w,2)===p?(a=p,w+=2):(a=h,0===S&&R(qt)),S--,o=a===h?void 0:(w=o,h),n=o!==h&&(l.substr(w,2)===d?(a=d,w+=2):(a=h,0===S&&R(Dt)),a===h&&(l.substr(w,2)===s?(a=s,w+=2):(a=h,0===S&&R(y)),a===h)&&(Ct.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(Gt))),a!==h)?o=[o,a]:(w=n,h);n!==h;)e.push(n),o=n=w,S++,l.substr(w,2)===p?(a=p,w+=2):(a=h,0===S&&R(qt)),S--,o=a===h?void 0:(w=o,h),n=o!==h&&(l.substr(w,2)===d?(a=d,w+=2):(a=h,0===S&&R(Dt)),a===h&&(l.substr(w,2)===s?(a=s,w+=2):(a=h,0===S&&R(y)),a===h)&&(Ct.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===S&&R(Gt))),a!==h)?o=[o,a]:(w=n,h);96===l.charCodeAt(w)?(n=nt,w++):(n=h,0===S&&R(Nt)),t=n!==h?(L=t,M(e)):(w=t,h)}else w=t,t=h}return t}())!==h&&(L=t,r=dr(r)),t=r),t}function U(){var t,r=[];for(At.test(l.charAt(w))?(t=l.charAt(w),w++):(t=h,0===S&&R(St));t!==h;)r.push(t),At.test(l.charAt(w))?(t=l.charAt(w),w++):(t=h,0===S&&R(St));return r}function Or(){var t,r,e,n,o=w,a=w;if(S++,t=function(){var t;(t=Pr())===h&&(t=Rr());return t}(),S--,(a=t===h?void 0:(w=a,h))!==h){if(t=w,pt.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===S&&R(Ft)),r!==h){for(e=[],C.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(m));n!==h;)e.push(n),C.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===S&&R(m));t=r=[r,e]}else w=t,t=h;o=t!==h?(L=o,_(t)):(w=o,h)}else w=o,o=h;return o}function Pr(){var t,r,e,n=w;return l.substr(w,4)===Q?(t=Q,w+=4):(t=h,0===S&&R(jt)),(n=t!==h&&(r=w,S++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===S&&R(m)),S--,(r=e===h?void 0:(w=r,h))!==h)?(L=n,null):(w=n,h))===h&&(n=w,l.substr(w,4)===V?(t=V,w+=4):(t=h,0===S&&R(Ot)),n=t!==h&&(r=w,S++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===S&&R(m)),S--,(r=e===h?void 0:(w=r,h))!==h)?(L=n,null):(w=n,h)),n}function Rr(){var t,r,e,n=w;return l.substr(w,4)===W?(t=W,w+=4):(t=h,0===S&&R(Pt)),(n=t!==h&&(r=w,S++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===S&&R(m)),S--,(r=e===h?void 0:(w=r,h))!==h)?(L=n,!0):(w=n,h))===h&&(n=w,l.substr(w,4)===X?(t=X,w+=4):(t=h,0===S&&R(Rt)),(n=t!==h&&(r=w,S++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===S&&R(m)),S--,(r=e===h?void 0:(w=r,h))!==h)?(L=n,!0):(w=n,h))===h)&&(n=w,l.substr(w,5)===Y?(t=Y,w+=5):(t=h,0===S&&R($t)),(n=t!==h&&(r=w,S++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===S&&R(m)),S--,(r=e===h?void 0:(w=r,h))!==h)?(L=n,!1):(w=n,h))===h)&&(n=w,l.substr(w,5)===tt?(t=tt,w+=5):(t=h,0===S&&R(Ut)),n=t!==h&&(r=w,S++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===S&&R(m)),S--,(r=e===h?void 0:(w=r,h))!==h)?(L=n,!1):(w=n,h)),n}if((r=N())!==h&&w===l.length)return r;throw r!==h&&w<l.length&&R({type:"end"}),yr(vr,e<l.length?l.charAt(e):null,e<l.length?mr(e,e+1):mr(e,e))}}}(),parse=(peggyParser.SyntaxError.prototype.name="PeggySyntaxError",peggyParser.parse),PeggySyntaxError=peggyParser.SyntaxError;export default parse;