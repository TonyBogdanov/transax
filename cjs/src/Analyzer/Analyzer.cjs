"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Logger_1=require("../Logger/Logger.cjs"),peg_1=require("./peg.cjs");class Options{constructor(e={}){var t;this.names=null!=(t=e.names)?t:["$t"],this.keyFormatter=null!=(t=e.keyFormatter)?t:e=>e,this.logger=null!=(t=e.logger)?t:new Logger_1.default({namespace:"TRANSAX:ANALYZER"})}}class Analyzer{skip(e,t){t=t?`in: ${t}::${e.line}:${e.column}.`:`at: ${e.line}:${e.column}.`;this.options.logger.verbose(`Skipping ${e.text} because: "${e.name}" isn't in the list of allowed names `+t)}constructor(e={}){this.options=new Options(e)}analyze(e,t){this.options.logger.log(`Analyzing: ${t||"[inline code]"}.`);var s=[];for(const o of(0,peg_1.default)(e))-1===this.options.names.indexOf(o.name)?this.skip(o,t):(o.source=t,o.key=this.options.keyFormatter(o.key,o),s.push(o));return s}}exports.default=Analyzer;