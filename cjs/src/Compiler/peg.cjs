"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const TextToken_1=require("./TextToken.cjs"),LiteralToken_1=require("./LiteralToken.cjs"),TernaryExpressionToken_1=require("./TernaryExpressionToken.cjs"),ComparisonExpressionToken_1=require("./ComparisonExpressionToken.cjs"),CallExpressionToken_1=require("./CallExpressionToken.cjs"),peggyParser=function(){function Mr(t,r,e,n){t=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(t,Mr.prototype),t.expected=r,t.found=e,t.location=n,t.name="SyntaxError",t}function t(){this.constructor=r}var r,e;function l(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,t+(e+=e.repeat(r)).slice(0,r))}return r=Mr,e=Error,t.prototype=e.prototype,r.prototype=new t,Mr.prototype.format=function(t){var r="Error: "+this.message;if(this.location){for(var e=null,n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var o,a,c,s=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,i=this.location.source+":"+u.line+":"+u.column;e?(c=this.location.end,o=l("",u.line.toString().length," "),a=e[s.line-1],c=(s.line===c.line?c.column:a.length+1)-s.column||1,r+="\n --\x3e "+i+"\n"+o+" |\n"+u.line+" | "+a+"\n"+o+" | "+l("",s.column-1," ")+l("",c,"^")):r+="\n at "+i}return r},Mr.buildMessage=function(t,r){var e={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r=t.parts.map(function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)});return"["+(t.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function c(t){return e[t.type](t)}return"Expected "+function(t){var r,e,n=t.map(c);if(n.sort(),0<n.length){for(e=r=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+((t=r)?'"'+o(t)+'"':"end of input")+" found."},{SyntaxError:Mr,parse:function(l,t){function q(t,r){return[t,...r.map(([,,,t])=>t)]}function U(t){return[t[0],...t[1]].join("")}function z(t){return t.map(t=>-1<["\\'","\\\\"].indexOf(t)?t[1]:t).join("")}function Z(t){return t.map(t=>-1<['\\"',"\\\\"].indexOf(t)?t[1]:t).join("")}function M(t){return t.map(([,t])=>-1<["\\`","\\\\"].indexOf(t)?t[1]:t).join("")}var h={},a=(t=void 0!==t?t:{}).grammarSource,r={Start:wr},N=wr,I="{{",B="}}",u="(",i=")",D="?",G=":",H="@",f=".",J="[",K="]",Q=",",V="null",W="NULL",X="true",Y="TRUE",tt="false",rt="FALSE",et="'",c="\\'",s="\\\\",nt='"',A='\\"',ot="`",p="${",d="\\`",at="0",ct="e",st="==",o="=",ut="===",it="!=",lt="!==",ht=">",ft=">=",At="<",pt="<=",dt=/^[ \t\r\n]/,Ct=/^[a-zA-Z_$]/,C=/^[a-zA-Z0-9_$]/,gt=/^[^']/,xt=/^[^"]/,vt=/^[^`]/,g=/^[0-9]/,x=/^[+\-]/,bt=/^[1-9]/,yt=S("{{",!1),Et=S("}}",!1),mt={type:"any"},v=S("(",!1),b=S(")",!1),Tt=S("?",!1),kt=S(":",!1),_t=S("@",!1),y=S(".",!1),wt=S("[",!1),jt=S("]",!1),Lt=S(",",!1),Ft=O([" ","\t","\r","\n"],!1,!1),St=O([["a","z"],["A","Z"],"_","$"],!1,!1),E=O([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1),Ot=S("null",!1),Pt=S("NULL",!1),Rt=S("true",!1),$t=S("TRUE",!1),qt=S("false",!1),Ut=S("FALSE",!1),zt=S("'",!1),Zt=S("\\'",!1),m=S("\\\\",!1),Mt=O(["'"],!0,!1),Nt=S('"',!1),It=S('\\"',!1),Bt=O(['"'],!0,!1),Dt=S("`",!1),Gt=S("${",!1),Ht=S("\\`",!1),Jt=O(["`"],!0,!1),T=O([["0","9"]],!1,!1),k=O(["+","-"],!1,!1),Kt=S("0",!1),Qt=O([["1","9"]],!1,!1),Vt=S("e",!0),Wt=S("==",!1),_=S("=",!1),Xt=S("===",!1),Yt=S("!=",!1),tr=S("!==",!1),rr=S(">",!1),er=S(">=",!1),nr=S("<",!1),or=S("<=",!1),ar=function(t){return t},cr=function(){return[]},sr=function(t){return t},ur=function(){return new TextToken_1.default(n(),F())},ir=function(t,r,e){return new TernaryExpressionToken_1.default(t,r,e,n(),F())},lr=function(t,r,e){return new ComparisonExpressionToken_1.default(t,e,r,n(),F())},hr=function(t,r,e){return new CallExpressionToken_1.CallExpressionObjectAccess(e)},fr=function(t,r,e){return new CallExpressionToken_1.CallExpressionArrayAccess(e)},Ar=function(t,r,e){return new CallExpressionToken_1.CallExpressionInvocation(null!=e?e:[])},pr=function(t,r,e){return new CallExpressionToken_1.default("@"===t,r,e,n(),F())},dr=function(t){return new LiteralToken_1.default(t,n(),F())},Cr=function(t){return new LiteralToken_1.default(t,n(),F())},gr=function(t){return new LiteralToken_1.default(t,n(),F())},xr=function(t){return new LiteralToken_1.default(t,n(),F())},vr=function(){return parseFloat(n())},br=function(){return parseFloat(n())},yr=function(){return parseFloat(n())},w=0,j=0,Er=[{line:1,column:1}],e=0,mr=[],L=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');N=r[t.startRule]}function n(){return l.substring(j,w)}function F(){return kr(j,w)}function S(t,r){return{type:"literal",text:t,ignoreCase:r}}function O(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Tr(t){var r,e=Er[t];if(e)return e;for(r=t-1;!Er[r];)r--;for(e={line:(e=Er[r]).line,column:e.column};r<t;)10===l.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Er[t]=e}function kr(t,r,e){var n=Tr(t),o=Tr(r),t={source:a,start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:o.line,column:o.column}};return e&&a&&"function"==typeof a.offset&&(t.start=a.offset(t.start),t.end=a.offset(t.end)),t}function P(t){w<e||(e<w&&(e=w,mr=[]),mr.push(t))}function _r(t,r,e){return new Mr(Mr.buildMessage(t,r),t,r,e)}function wr(){var t=w,r=[],e=jr();if((e=e===h?Lr():e)!==h)for(;e!==h;)r.push(e),(e=jr())===h&&(e=Lr());else r=h;return r!==h&&(j=t,r=ar(r)),(t=r)===h&&(r="",j=t=w,t=r=cr()),t}function jr(){var t,r,e=w;return l.substr(w,2)===I?(t=I,w+=2):(t=h,0===L&&P(yt)),e=t!==h&&($(),(t=R())!==h)&&($(),l.substr(w,2)===B?(r=B,w+=2):(r=h,0===L&&P(Et)),r!==h)?(j=e,sr(t)):(w=e,h)}function Lr(){var t,r=w;return l.length>w?(t=l.charAt(w),w++):(t=h,0===L&&P(mt)),t!==h&&(j=r,t=ur()),t}function R(){var t=Or();return t=t===h&&(t=Pr())===h&&(t=Rr())===h?qr():t}function Fr(){var t,r,e=w;return 40===l.charCodeAt(w)?(t=u,w++):(t=h,0===L&&P(v)),e=(e=t!==h&&($(),(t=Or())!==h)&&($(),41===l.charCodeAt(w)?(r=i,w++):(r=h,0===L&&P(b)),r!==h)?(j=e,t):(w=e,h))===h&&(e=Pr())===h&&(e=Rr())===h?qr():e}function Sr(){var t,r,e,n=w;return 40===l.charCodeAt(w)?(t=u,w++):(t=h,0===L&&P(v)),n=(n=t!==h&&($(),(r=Or())!==h)&&($(),41===l.charCodeAt(w)?(e=i,w++):(e=h,0===L&&P(b)),e!==h)?(j=n,r):(w=n,h))===h&&(n=w,40===l.charCodeAt(w)?(t=u,w++):(t=h,0===L&&P(v)),(n=t!==h&&($(),(r=Pr())!==h)&&($(),41===l.charCodeAt(w)?(e=i,w++):(e=h,0===L&&P(b)),e!==h)?(j=n,r):(w=n,h))===h)&&(n=Rr())===h?qr():n}function Or(){var t,r,e=w,n=Fr();return e=n!==h&&($(),63===l.charCodeAt(w)?(t=D,w++):(t=h,0===L&&P(Tt)),t!==h)&&($(),(t=Fr())!==h)&&($(),58===l.charCodeAt(w)?(r=G,w++):(r=h,0===L&&P(kt)),r!==h)&&($(),(r=Fr())!==h)?(j=e,ir(n,t,r)):(w=e,h)}function Pr(){var t,r,e=w,n=Sr();return e=n!==h&&($(),(t=function(){var t,r,e,n;t=w,l.substr(w,2)===st?(r=st,w+=2):(r=h,0===L&&P(Wt));t=r!==h&&(e=w,L++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===L&&P(_)),L--,e=n===h?void 0:(w=e,h),e!==h)?(j=t,r):(w=t,h);t===h&&(l.substr(w,3)===ut?(t=ut,w+=3):(t=h,0===L&&P(Xt)),t===h)&&(t=w,l.substr(w,2)===it?(r=it,w+=2):(r=h,0===L&&P(Yt)),(t=r!==h&&(e=w,L++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===L&&P(_)),L--,(e=n===h?void 0:(w=e,h))!==h)?(j=t,r):(w=t,h))===h)&&(l.substr(w,3)===lt?(t=lt,w+=3):(t=h,0===L&&P(tr)),t===h)&&(t=w,62===l.charCodeAt(w)?(r=ht,w++):(r=h,0===L&&P(rr)),(t=r!==h&&(e=w,L++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===L&&P(_)),L--,(e=n===h?void 0:(w=e,h))!==h)?(j=t,r):(w=t,h))===h)&&(l.substr(w,2)===ft?(t=ft,w+=2):(t=h,0===L&&P(er)),t===h)&&(t=w,60===l.charCodeAt(w)?(r=At,w++):(r=h,0===L&&P(nr)),(t=r!==h&&(e=w,L++,61===l.charCodeAt(w)?(n=o,w++):(n=h,0===L&&P(_)),L--,(e=n===h?void 0:(w=e,h))!==h)?(j=t,r):(w=t,h))===h)&&(l.substr(w,2)===pt?(t=pt,w+=2):(t=h,0===L&&P(or)));return t}())!==h)&&($(),(r=Sr())!==h)?(j=e,lr(n,t,r)):(w=e,h)}function Rr(){var t,r,e,n,o,a,c,s=w;if(64===l.charCodeAt(w)?(t=H,w++):(t=h,0===L&&P(_t)),t===h&&(t=null),(r=Ur())!==h){for(e=[],n=w,$(),46===l.charCodeAt(w)?(o=f,w++):(o=h,0===L&&P(y)),(n=o!==h&&($(),(a=Ur())!==h)?(j=n,hr(t,r,a)):(w=n,h))===h&&(n=w,$(),91===l.charCodeAt(w)?(o=J,w++):(o=h,0===L&&P(wt)),(n=o!==h&&($(),(a=R())!==h)&&($(),93===l.charCodeAt(w)?(c=K,w++):(c=h,0===L&&P(jt)),c!==h)?(j=n,fr(t,r,a)):(w=n,h))===h)&&(n=w,$(),40===l.charCodeAt(w)?(o=u,w++):(o=h,0===L&&P(v)),n=o!==h&&($(),(a=$r())===h&&(a=null),$(),41===l.charCodeAt(w)?(c=i,w++):(c=h,0===L&&P(b)),c!==h)?(j=n,Ar(t,r,a)):(w=n,h));n!==h;)e.push(n),n=w,$(),46===l.charCodeAt(w)?(o=f,w++):(o=h,0===L&&P(y)),(n=o!==h&&($(),(a=Ur())!==h)?(j=n,hr(t,r,a)):(w=n,h))===h&&(n=w,$(),91===l.charCodeAt(w)?(o=J,w++):(o=h,0===L&&P(wt)),(n=o!==h&&($(),(a=R())!==h)&&($(),93===l.charCodeAt(w)?(c=K,w++):(c=h,0===L&&P(jt)),c!==h)?(j=n,fr(t,r,a)):(w=n,h))===h)&&(n=w,$(),40===l.charCodeAt(w)?(o=u,w++):(o=h,0===L&&P(v)),n=o!==h&&($(),(a=$r())===h&&(a=null),$(),41===l.charCodeAt(w)?(c=i,w++):(c=h,0===L&&P(b)),c!==h)?(j=n,Ar(t,r,a)):(w=n,h));j=s,s=pr(t,r,e)}else w=s,s=h;return s}function $r(){var t,r,e,n,o,a,c=w,s=R();if(s!==h){for(t=[],r=w,e=$(),44===l.charCodeAt(w)?(n=Q,w++):(n=h,0===L&&P(Lt)),r=n!==h&&(o=$(),(a=R())!==h)?e=[e,n,o,a]:(w=r,h);r!==h;)t.push(r),r=w,e=$(),44===l.charCodeAt(w)?(n=Q,w++):(n=h,0===L&&P(Lt)),r=n!==h&&(o=$(),(a=R())!==h)?e=[e,n,o,a]:(w=r,h);j=c,c=q(s,t)}else w=c,c=h;return c}function qr(){var t=w,r=zr();return r!==h&&(j=t,r=dr(r)),(t=r)===h&&(t=w,(r=Zr())!==h&&(j=t,r=Cr(r)),(t=r)===h)&&(t=w,(r=function(){var t,r,e,n;t=w,t=(r=function(){var t,r,e,n,o,a,c,s,u,i;t=w,x.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===L&&P(k));r===h&&(r=null);48===l.charCodeAt(w)?(e=at,w++):(e=h,0===L&&P(Kt));if(e===h)if(e=w,bt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(Qt)),n!==h){for(o=[],g.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(T));a!==h;)o.push(a),g.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(T));e=n=[n,o]}else w=e,e=h;if(e!==h)if(46===l.charCodeAt(w)?(n=f,w++):(n=h,0===L&&P(y)),n!==h){for(o=[],g.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(T));a!==h;)o.push(a),g.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(T));if(a=w,l.substr(w,1).toLowerCase()===ct?(c=l.charAt(w),w++):(c=h,0===L&&P(Vt)),c!==h){if(x.test(l.charAt(w))?(s=l.charAt(w),w++):(s=h,0===L&&P(k)),s===h&&(s=null),u=[],g.test(l.charAt(w))?(i=l.charAt(w),w++):(i=h,0===L&&P(T)),i!==h)for(;i!==h;)u.push(i),g.test(l.charAt(w))?(i=l.charAt(w),w++):(i=h,0===L&&P(T));else u=h;a=u!==h?c=[c,s,u]:(w=a,h)}else w=a,a=h;a===h&&(a=null),j=t,t=vr()}else w=t,t=h;else w=t,t=h;if(t===h){if(t=w,x.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===L&&P(k)),r===h&&(r=null),46===l.charCodeAt(w)?(e=f,w++):(e=h,0===L&&P(y)),e!==h){if(n=[],g.test(l.charAt(w))?(o=l.charAt(w),w++):(o=h,0===L&&P(T)),o!==h)for(;o!==h;)n.push(o),g.test(l.charAt(w))?(o=l.charAt(w),w++):(o=h,0===L&&P(T));else n=h;if(n!==h){if(o=w,l.substr(w,1).toLowerCase()===ct?(a=l.charAt(w),w++):(a=h,0===L&&P(Vt)),a!==h){if(x.test(l.charAt(w))?(c=l.charAt(w),w++):(c=h,0===L&&P(k)),c===h&&(c=null),s=[],g.test(l.charAt(w))?(u=l.charAt(w),w++):(u=h,0===L&&P(T)),u!==h)for(;u!==h;)s.push(u),g.test(l.charAt(w))?(u=l.charAt(w),w++):(u=h,0===L&&P(T));else s=h;o=s!==h?a=[a,c,s]:(w=o,h)}else w=o,o=h;o===h&&(o=null),j=t,t=br()}else w=t,t=h}else w=t,t=h;if(t===h){if(t=w,x.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===L&&P(k)),r===h&&(r=null),48===l.charCodeAt(w)?(e=at,w++):(e=h,0===L&&P(Kt)),e===h)if(e=w,bt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(Qt)),n!==h){for(o=[],g.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(T));a!==h;)o.push(a),g.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(T));e=n=[n,o]}else w=e,e=h;if(e!==h){if(n=w,l.substr(w,1).toLowerCase()===ct?(o=l.charAt(w),w++):(o=h,0===L&&P(Vt)),o!==h){if(x.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(k)),a===h&&(a=null),c=[],g.test(l.charAt(w))?(s=l.charAt(w),w++):(s=h,0===L&&P(T)),s!==h)for(;s!==h;)c.push(s),g.test(l.charAt(w))?(s=l.charAt(w),w++):(s=h,0===L&&P(T));else c=h;n=c!==h?o=[o,a,c]:(w=n,h)}else w=n,n=h;n===h&&(n=null),j=t,t=yr()}else w=t,t=h}}return t}())!==h&&(e=w,L++,Ct.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(St)),n===h&&(g.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(T))),L--,e=n===h?void 0:(w=e,h),e!==h)?(j=t,r):(w=t,h);return t}())!==h&&(j=t,r=gr(r)),(t=r)===h)&&(t=w,(r=function(){var t,r,e,n,o,a;t=w,39===l.charCodeAt(w)?(r=et,w++):(r=h,0===L&&P(zt));if(r!==h){for(e=[],l.substr(w,2)===c?(n=c,w+=2):(n=h,0===L&&P(Zt)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===L&&P(m)),n===h)&&(gt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(Mt)));n!==h;)e.push(n),l.substr(w,2)===c?(n=c,w+=2):(n=h,0===L&&P(Zt)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===L&&P(m)),n===h)&&(gt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(Mt)));39===l.charCodeAt(w)?(n=et,w++):(n=h,0===L&&P(zt)),t=n!==h?(j=t,z(e)):(w=t,h)}else w=t,t=h;if(t===h){if(t=w,34===l.charCodeAt(w)?(r=nt,w++):(r=h,0===L&&P(Nt)),r!==h){for(e=[],l.substr(w,2)===A?(n=A,w+=2):(n=h,0===L&&P(It)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===L&&P(m)),n===h)&&(xt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(Bt)));n!==h;)e.push(n),l.substr(w,2)===A?(n=A,w+=2):(n=h,0===L&&P(It)),n===h&&(l.substr(w,2)===s?(n=s,w+=2):(n=h,0===L&&P(m)),n===h)&&(xt.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(Bt)));34===l.charCodeAt(w)?(n=nt,w++):(n=h,0===L&&P(Nt)),t=n!==h?(j=t,Z(e)):(w=t,h)}else w=t,t=h;if(t===h)if(t=w,96===l.charCodeAt(w)?(r=ot,w++):(r=h,0===L&&P(Dt)),r!==h){for(e=[],o=n=w,L++,l.substr(w,2)===p?(a=p,w+=2):(a=h,0===L&&P(Gt)),L--,o=a===h?void 0:(w=o,h),n=o!==h&&(l.substr(w,2)===d?(a=d,w+=2):(a=h,0===L&&P(Ht)),a===h&&(l.substr(w,2)===s?(a=s,w+=2):(a=h,0===L&&P(m)),a===h)&&(vt.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(Jt))),a!==h)?o=[o,a]:(w=n,h);n!==h;)e.push(n),o=n=w,L++,l.substr(w,2)===p?(a=p,w+=2):(a=h,0===L&&P(Gt)),L--,o=a===h?void 0:(w=o,h),n=o!==h&&(l.substr(w,2)===d?(a=d,w+=2):(a=h,0===L&&P(Ht)),a===h&&(l.substr(w,2)===s?(a=s,w+=2):(a=h,0===L&&P(m)),a===h)&&(vt.test(l.charAt(w))?(a=l.charAt(w),w++):(a=h,0===L&&P(Jt))),a!==h)?o=[o,a]:(w=n,h);96===l.charCodeAt(w)?(n=ot,w++):(n=h,0===L&&P(Dt)),t=n!==h?(j=t,M(e)):(w=t,h)}else w=t,t=h}return t}())!==h&&(j=t,r=xr(r)),t=r),t}function $(){var t,r=[];for(dt.test(l.charAt(w))?(t=l.charAt(w),w++):(t=h,0===L&&P(Ft));t!==h;)r.push(t),dt.test(l.charAt(w))?(t=l.charAt(w),w++):(t=h,0===L&&P(Ft));return r}function Ur(){var t,r,e,n,o=w,a=w;if(L++,t=function(){var t;(t=zr())===h&&(t=Zr());return t}(),L--,(a=t===h?void 0:(w=a,h))!==h){if(t=w,Ct.test(l.charAt(w))?(r=l.charAt(w),w++):(r=h,0===L&&P(St)),r!==h){for(e=[],C.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(E));n!==h;)e.push(n),C.test(l.charAt(w))?(n=l.charAt(w),w++):(n=h,0===L&&P(E));t=r=[r,e]}else w=t,t=h;o=t!==h?(j=o,U(t)):(w=o,h)}else w=o,o=h;return o}function zr(){var t,r,e,n=w;return l.substr(w,4)===V?(t=V,w+=4):(t=h,0===L&&P(Ot)),(n=t!==h&&(r=w,L++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===L&&P(E)),L--,(r=e===h?void 0:(w=r,h))!==h)?(j=n,null):(w=n,h))===h&&(n=w,l.substr(w,4)===W?(t=W,w+=4):(t=h,0===L&&P(Pt)),n=t!==h&&(r=w,L++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===L&&P(E)),L--,(r=e===h?void 0:(w=r,h))!==h)?(j=n,null):(w=n,h)),n}function Zr(){var t,r,e,n=w;return l.substr(w,4)===X?(t=X,w+=4):(t=h,0===L&&P(Rt)),(n=t!==h&&(r=w,L++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===L&&P(E)),L--,(r=e===h?void 0:(w=r,h))!==h)?(j=n,!0):(w=n,h))===h&&(n=w,l.substr(w,4)===Y?(t=Y,w+=4):(t=h,0===L&&P($t)),(n=t!==h&&(r=w,L++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===L&&P(E)),L--,(r=e===h?void 0:(w=r,h))!==h)?(j=n,!0):(w=n,h))===h)&&(n=w,l.substr(w,5)===tt?(t=tt,w+=5):(t=h,0===L&&P(qt)),(n=t!==h&&(r=w,L++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===L&&P(E)),L--,(r=e===h?void 0:(w=r,h))!==h)?(j=n,!1):(w=n,h))===h)&&(n=w,l.substr(w,5)===rt?(t=rt,w+=5):(t=h,0===L&&P(Ut)),n=t!==h&&(r=w,L++,C.test(l.charAt(w))?(e=l.charAt(w),w++):(e=h,0===L&&P(E)),L--,(r=e===h?void 0:(w=r,h))!==h)?(j=n,!1):(w=n,h)),n}if((r=N())!==h&&w===l.length)return r;throw r!==h&&w<l.length&&P({type:"end"}),_r(mr,e<l.length?l.charAt(e):null,e<l.length?kr(e,e+1):kr(e,e))}}}(),parse=(peggyParser.SyntaxError.prototype.name="PeggySyntaxError",peggyParser.parse),PeggySyntaxError=peggyParser.SyntaxError;exports.default=parse;