"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const TextToken_1=require("./TextToken"),LiteralToken_1=require("./LiteralToken"),ComparisonExpressionToken_1=require("./ComparisonExpressionToken"),BracketSafeExpressionToken_1=require("./BracketSafeExpressionToken"),CallExpressionToken_1=require("./CallExpressionToken"),peggyParser=function(){function Rr(t,r,e,n){t=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(t,Rr.prototype),t.expected=r,t.found=e,t.location=n,t.name="SyntaxError",t}function t(){this.constructor=r}var r,e;function l(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,t+(e+=e.repeat(r)).slice(0,r))}return r=Rr,e=Error,t.prototype=e.prototype,r.prototype=new t,Rr.prototype.format=function(t){var r="Error: "+this.message;if(this.location){for(var e=null,n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var o,a,c,s=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,i=this.location.source+":"+u.line+":"+u.column;e?(c=this.location.end,o=l("",u.line.toString().length," "),a=e[s.line-1],c=(s.line===c.line?c.column:a.length+1)-s.column||1,r+="\n --\x3e "+i+"\n"+o+" |\n"+u.line+" | "+a+"\n"+o+" | "+l("",s.column-1," ")+l("",c,"^")):r+="\n at "+i}return r},Rr.buildMessage=function(t,r){var e={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r=t.parts.map(function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)});return"["+(t.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function c(t){return e[t.type](t)}return"Expected "+function(t){var r,e,n=t.map(c);if(n.sort(),0<n.length){for(e=r=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+((t=r)?'"'+o(t)+'"':"end of input")+" found."},{SyntaxError:Rr,parse:function(l,t){function q(t){return new BracketSafeExpressionToken_1.default(t,S(),F())}function U(t,r){return[t,...r.map(([,,,t])=>t)]}function z(t){return[t[0],...t[1]].join("")}function Z(t){return t.map(t=>-1<["\\'","\\\\"].indexOf(t)?t[1]:t).join("")}function B(t){return t.map(t=>-1<['\\"',"\\\\"].indexOf(t)?t[1]:t).join("")}function M(t){return t.map(([,t])=>-1<["\\`","\\\\"].indexOf(t)?t[1]:t).join("")}var f={},a=(t=void 0!==t?t:{}).grammarSource,r={Start:mr},N=mr,I="{{",D="}}",u="(",i=")",G="@",h=".",H="[",J="]",K=",",Q="null",V="NULL",W="true",X="TRUE",Y="false",tt="FALSE",rt="'",c="\\'",s="\\\\",et='"',A='\\"',nt="`",p="${",d="\\`",ot="0",g="e",at="==",o="=",ct="===",st="!=",ut="!==",it=">",lt=">=",ft="<",ht="<=",At=/^[ \t\r\n]/,pt=/^[a-zA-Z_$]/,C=/^[a-zA-Z0-9_$]/,dt=/^[^']/,gt=/^[^"]/,Ct=/^[^`]/,x=/^[0-9]/,v=/^[+\-]/,xt=/^[1-9]/,vt=j("{{",!1),bt=j("}}",!1),yt={type:"any"},Et=j("(",!1),mt=j(")",!1),Tt=j("@",!1),b=j(".",!1),kt=j("[",!1),_t=j("]",!1),wt=j(",",!1),Lt=O([" ","\t","\r","\n"],!1,!1),St=O([["a","z"],["A","Z"],"_","$"],!1,!1),y=O([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1),Ft=j("null",!1),jt=j("NULL",!1),Ot=j("true",!1),Pt=j("TRUE",!1),Rt=j("false",!1),$t=j("FALSE",!1),qt=j("'",!1),Ut=j("\\'",!1),E=j("\\\\",!1),zt=O(["'"],!0,!1),Zt=j('"',!1),Bt=j('\\"',!1),Mt=O(['"'],!0,!1),Nt=j("`",!1),It=j("${",!1),Dt=j("\\`",!1),Gt=O(["`"],!0,!1),m=O([["0","9"]],!1,!1),T=O(["+","-"],!1,!1),Ht=j("0",!1),Jt=O([["1","9"]],!1,!1),Kt=j("e",!0),Qt=j("==",!1),k=j("=",!1),Vt=j("===",!1),Wt=j("!=",!1),Xt=j("!==",!1),Yt=j(">",!1),tr=j(">=",!1),rr=j("<",!1),er=j("<=",!1),nr=function(t){return t},or=function(){return[]},ar=function(t){return t},cr=function(){return new TextToken_1.default(S(),F())},sr=function(t,r,e){return new ComparisonExpressionToken_1.default(t,e,r,S(),F())},ur=function(t,r,e){return new CallExpressionToken_1.CallExpressionObjectAccess(e)},ir=function(t,r,e){return new CallExpressionToken_1.CallExpressionArrayAccess(e)},lr=function(t,r,e){return new CallExpressionToken_1.CallExpressionInvocation(null!=e?e:[])},fr=function(t,r,e){return new CallExpressionToken_1.default("@"===t,r,e,S(),F())},hr=function(t){return new LiteralToken_1.default(t,S(),F())},Ar=function(t){return new LiteralToken_1.default(t,S(),F())},pr=function(t){return new LiteralToken_1.default(t,S(),F())},dr=function(t){return new LiteralToken_1.default(t,S(),F())},gr=function(){return parseFloat(S())},Cr=function(){return parseFloat(S())},xr=function(){return parseFloat(S())},_=0,w=0,n=[{line:1,column:1}],e=0,vr=[],L=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');N=r[t.startRule]}function S(){return l.substring(w,_)}function F(){return yr(w,_)}function j(t,r){return{type:"literal",text:t,ignoreCase:r}}function O(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function br(t){var r,e=n[t];if(e)return e;for(r=t-1;!n[r];)r--;for(e={line:(e=n[r]).line,column:e.column};r<t;)10===l.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return n[t]=e}function yr(t,r,e){var n=br(t),o=br(r),t={source:a,start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:o.line,column:o.column}};return e&&a&&"function"==typeof a.offset&&(t.start=a.offset(t.start),t.end=a.offset(t.end)),t}function P(t){_<e||(e<_&&(e=_,vr=[]),vr.push(t))}function Er(t,r,e){return new Rr(Rr.buildMessage(t,r),t,r,e)}function mr(){var t=_,r=[],e=Tr();if((e=e===f?kr():e)!==f)for(;e!==f;)r.push(e),(e=Tr())===f&&(e=kr());else r=f;return r!==f&&(w=t,r=nr(r)),(t=r)===f&&(r="",w=t=_,t=r=or()),t}function Tr(){var t,r,e=_;return l.substr(_,2)===I?(t=I,_+=2):(t=f,0===L&&P(vt)),e=t!==f&&($(),(t=R())!==f)&&($(),l.substr(_,2)===D?(r=D,_+=2):(r=f,0===L&&P(bt)),r!==f)?(w=e,ar(t)):(_=e,f)}function kr(){var t,r=_;return l.length>_?(t=l.charAt(_),_++):(t=f,0===L&&P(yt)),t!==f&&(w=r,t=cr()),t}function R(){var t=wr();return t=t===f&&(t=Lr())===f?Fr():t}function _r(){var t,r,e=_;return 40===l.charCodeAt(_)?(t=u,_++):(t=f,0===L&&P(Et)),e=(e=t!==f&&($(),(t=wr())!==f)&&($(),41===l.charCodeAt(_)?(r=i,_++):(r=f,0===L&&P(mt)),r!==f)?(w=e,q(t)):(_=e,f))===f&&(e=Lr())===f?Fr():e}function wr(){var t,r,e=_,n=_r();return e=n!==f&&($(),(t=function(){var t,r,e,n;t=_,l.substr(_,2)===at?(r=at,_+=2):(r=f,0===L&&P(Qt));t=r!==f&&(e=_,L++,61===l.charCodeAt(_)?(n=o,_++):(n=f,0===L&&P(k)),L--,e=n===f?void 0:(_=e,f),e!==f)?(w=t,r):(_=t,f);t===f&&(l.substr(_,3)===ct?(t=ct,_+=3):(t=f,0===L&&P(Vt)),t===f)&&(t=_,l.substr(_,2)===st?(r=st,_+=2):(r=f,0===L&&P(Wt)),(t=r!==f&&(e=_,L++,61===l.charCodeAt(_)?(n=o,_++):(n=f,0===L&&P(k)),L--,(e=n===f?void 0:(_=e,f))!==f)?(w=t,r):(_=t,f))===f)&&(l.substr(_,3)===ut?(t=ut,_+=3):(t=f,0===L&&P(Xt)),t===f)&&(t=_,62===l.charCodeAt(_)?(r=it,_++):(r=f,0===L&&P(Yt)),(t=r!==f&&(e=_,L++,61===l.charCodeAt(_)?(n=o,_++):(n=f,0===L&&P(k)),L--,(e=n===f?void 0:(_=e,f))!==f)?(w=t,r):(_=t,f))===f)&&(l.substr(_,2)===lt?(t=lt,_+=2):(t=f,0===L&&P(tr)),t===f)&&(t=_,60===l.charCodeAt(_)?(r=ft,_++):(r=f,0===L&&P(rr)),(t=r!==f&&(e=_,L++,61===l.charCodeAt(_)?(n=o,_++):(n=f,0===L&&P(k)),L--,(e=n===f?void 0:(_=e,f))!==f)?(w=t,r):(_=t,f))===f)&&(l.substr(_,2)===ht?(t=ht,_+=2):(t=f,0===L&&P(er)));return t}())!==f)&&($(),(r=_r())!==f)?(w=e,sr(n,t,r)):(_=e,f)}function Lr(){var t,r,e,n,o,a,c,s=_;if(64===l.charCodeAt(_)?(t=G,_++):(t=f,0===L&&P(Tt)),t===f&&(t=null),(r=jr())!==f){for(e=[],n=_,$(),46===l.charCodeAt(_)?(o=h,_++):(o=f,0===L&&P(b)),(n=o!==f&&($(),(a=jr())!==f)?(w=n,ur(t,r,a)):(_=n,f))===f&&(n=_,$(),91===l.charCodeAt(_)?(o=H,_++):(o=f,0===L&&P(kt)),(n=o!==f&&($(),(a=R())!==f)&&($(),93===l.charCodeAt(_)?(c=J,_++):(c=f,0===L&&P(_t)),c!==f)?(w=n,ir(t,r,a)):(_=n,f))===f)&&(n=_,$(),40===l.charCodeAt(_)?(o=u,_++):(o=f,0===L&&P(Et)),n=o!==f&&($(),(a=Sr())===f&&(a=null),$(),41===l.charCodeAt(_)?(c=i,_++):(c=f,0===L&&P(mt)),c!==f)?(w=n,lr(t,r,a)):(_=n,f));n!==f;)e.push(n),n=_,$(),46===l.charCodeAt(_)?(o=h,_++):(o=f,0===L&&P(b)),(n=o!==f&&($(),(a=jr())!==f)?(w=n,ur(t,r,a)):(_=n,f))===f&&(n=_,$(),91===l.charCodeAt(_)?(o=H,_++):(o=f,0===L&&P(kt)),(n=o!==f&&($(),(a=R())!==f)&&($(),93===l.charCodeAt(_)?(c=J,_++):(c=f,0===L&&P(_t)),c!==f)?(w=n,ir(t,r,a)):(_=n,f))===f)&&(n=_,$(),40===l.charCodeAt(_)?(o=u,_++):(o=f,0===L&&P(Et)),n=o!==f&&($(),(a=Sr())===f&&(a=null),$(),41===l.charCodeAt(_)?(c=i,_++):(c=f,0===L&&P(mt)),c!==f)?(w=n,lr(t,r,a)):(_=n,f));w=s,s=fr(t,r,e)}else _=s,s=f;return s}function Sr(){var t,r,e,n,o,a,c=_,s=R();if(s!==f){for(t=[],r=_,e=$(),44===l.charCodeAt(_)?(n=K,_++):(n=f,0===L&&P(wt)),r=n!==f&&(o=$(),(a=R())!==f)?e=[e,n,o,a]:(_=r,f);r!==f;)t.push(r),r=_,e=$(),44===l.charCodeAt(_)?(n=K,_++):(n=f,0===L&&P(wt)),r=n!==f&&(o=$(),(a=R())!==f)?e=[e,n,o,a]:(_=r,f);w=c,c=U(s,t)}else _=c,c=f;return c}function Fr(){var t=_,r=Or();return r!==f&&(w=t,r=hr(r)),(t=r)===f&&(t=_,(r=Pr())!==f&&(w=t,r=Ar(r)),(t=r)===f)&&(t=_,(r=function(){var t,r,e,n;t=_,t=(r=function(){var t,r,e,n,o,a,c,s,u,i;t=_,v.test(l.charAt(_))?(r=l.charAt(_),_++):(r=f,0===L&&P(T));r===f&&(r=null);48===l.charCodeAt(_)?(e=ot,_++):(e=f,0===L&&P(Ht));if(e===f)if(e=_,xt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(Jt)),n!==f){for(o=[],x.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(m));a!==f;)o.push(a),x.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(m));e=n=[n,o]}else _=e,e=f;if(e!==f)if(46===l.charCodeAt(_)?(n=h,_++):(n=f,0===L&&P(b)),n!==f){for(o=[],x.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(m));a!==f;)o.push(a),x.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(m));if(a=_,l.substr(_,1).toLowerCase()===g?(c=l.charAt(_),_++):(c=f,0===L&&P(Kt)),c!==f){if(v.test(l.charAt(_))?(s=l.charAt(_),_++):(s=f,0===L&&P(T)),s===f&&(s=null),u=[],x.test(l.charAt(_))?(i=l.charAt(_),_++):(i=f,0===L&&P(m)),i!==f)for(;i!==f;)u.push(i),x.test(l.charAt(_))?(i=l.charAt(_),_++):(i=f,0===L&&P(m));else u=f;a=u!==f?c=[c,s,u]:(_=a,f)}else _=a,a=f;a===f&&(a=null),w=t,t=gr()}else _=t,t=f;else _=t,t=f;if(t===f){if(t=_,v.test(l.charAt(_))?(r=l.charAt(_),_++):(r=f,0===L&&P(T)),r===f&&(r=null),46===l.charCodeAt(_)?(e=h,_++):(e=f,0===L&&P(b)),e!==f){if(n=[],x.test(l.charAt(_))?(o=l.charAt(_),_++):(o=f,0===L&&P(m)),o!==f)for(;o!==f;)n.push(o),x.test(l.charAt(_))?(o=l.charAt(_),_++):(o=f,0===L&&P(m));else n=f;if(n!==f){if(o=_,l.substr(_,1).toLowerCase()===g?(a=l.charAt(_),_++):(a=f,0===L&&P(Kt)),a!==f){if(v.test(l.charAt(_))?(c=l.charAt(_),_++):(c=f,0===L&&P(T)),c===f&&(c=null),s=[],x.test(l.charAt(_))?(u=l.charAt(_),_++):(u=f,0===L&&P(m)),u!==f)for(;u!==f;)s.push(u),x.test(l.charAt(_))?(u=l.charAt(_),_++):(u=f,0===L&&P(m));else s=f;o=s!==f?a=[a,c,s]:(_=o,f)}else _=o,o=f;o===f&&(o=null),w=t,t=Cr()}else _=t,t=f}else _=t,t=f;if(t===f){if(t=_,v.test(l.charAt(_))?(r=l.charAt(_),_++):(r=f,0===L&&P(T)),r===f&&(r=null),48===l.charCodeAt(_)?(e=ot,_++):(e=f,0===L&&P(Ht)),e===f)if(e=_,xt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(Jt)),n!==f){for(o=[],x.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(m));a!==f;)o.push(a),x.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(m));e=n=[n,o]}else _=e,e=f;if(e!==f){if(n=_,l.substr(_,1).toLowerCase()===g?(o=l.charAt(_),_++):(o=f,0===L&&P(Kt)),o!==f){if(v.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(T)),a===f&&(a=null),c=[],x.test(l.charAt(_))?(s=l.charAt(_),_++):(s=f,0===L&&P(m)),s!==f)for(;s!==f;)c.push(s),x.test(l.charAt(_))?(s=l.charAt(_),_++):(s=f,0===L&&P(m));else c=f;n=c!==f?o=[o,a,c]:(_=n,f)}else _=n,n=f;n===f&&(n=null),w=t,t=xr()}else _=t,t=f}}return t}())!==f&&(e=_,L++,pt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(St)),n===f&&(x.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(m))),L--,e=n===f?void 0:(_=e,f),e!==f)?(w=t,r):(_=t,f);return t}())!==f&&(w=t,r=pr(r)),(t=r)===f)&&(t=_,(r=function(){var t,r,e,n,o,a;t=_,39===l.charCodeAt(_)?(r=rt,_++):(r=f,0===L&&P(qt));if(r!==f){for(e=[],l.substr(_,2)===c?(n=c,_+=2):(n=f,0===L&&P(Ut)),n===f&&(l.substr(_,2)===s?(n=s,_+=2):(n=f,0===L&&P(E)),n===f)&&(dt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(zt)));n!==f;)e.push(n),l.substr(_,2)===c?(n=c,_+=2):(n=f,0===L&&P(Ut)),n===f&&(l.substr(_,2)===s?(n=s,_+=2):(n=f,0===L&&P(E)),n===f)&&(dt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(zt)));39===l.charCodeAt(_)?(n=rt,_++):(n=f,0===L&&P(qt)),t=n!==f?(w=t,Z(e)):(_=t,f)}else _=t,t=f;if(t===f){if(t=_,34===l.charCodeAt(_)?(r=et,_++):(r=f,0===L&&P(Zt)),r!==f){for(e=[],l.substr(_,2)===A?(n=A,_+=2):(n=f,0===L&&P(Bt)),n===f&&(l.substr(_,2)===s?(n=s,_+=2):(n=f,0===L&&P(E)),n===f)&&(gt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(Mt)));n!==f;)e.push(n),l.substr(_,2)===A?(n=A,_+=2):(n=f,0===L&&P(Bt)),n===f&&(l.substr(_,2)===s?(n=s,_+=2):(n=f,0===L&&P(E)),n===f)&&(gt.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(Mt)));34===l.charCodeAt(_)?(n=et,_++):(n=f,0===L&&P(Zt)),t=n!==f?(w=t,B(e)):(_=t,f)}else _=t,t=f;if(t===f)if(t=_,96===l.charCodeAt(_)?(r=nt,_++):(r=f,0===L&&P(Nt)),r!==f){for(e=[],o=n=_,L++,l.substr(_,2)===p?(a=p,_+=2):(a=f,0===L&&P(It)),L--,o=a===f?void 0:(_=o,f),n=o!==f&&(l.substr(_,2)===d?(a=d,_+=2):(a=f,0===L&&P(Dt)),a===f&&(l.substr(_,2)===s?(a=s,_+=2):(a=f,0===L&&P(E)),a===f)&&(Ct.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(Gt))),a!==f)?o=[o,a]:(_=n,f);n!==f;)e.push(n),o=n=_,L++,l.substr(_,2)===p?(a=p,_+=2):(a=f,0===L&&P(It)),L--,o=a===f?void 0:(_=o,f),n=o!==f&&(l.substr(_,2)===d?(a=d,_+=2):(a=f,0===L&&P(Dt)),a===f&&(l.substr(_,2)===s?(a=s,_+=2):(a=f,0===L&&P(E)),a===f)&&(Ct.test(l.charAt(_))?(a=l.charAt(_),_++):(a=f,0===L&&P(Gt))),a!==f)?o=[o,a]:(_=n,f);96===l.charCodeAt(_)?(n=nt,_++):(n=f,0===L&&P(Nt)),t=n!==f?(w=t,M(e)):(_=t,f)}else _=t,t=f}return t}())!==f&&(w=t,r=dr(r)),t=r),t}function $(){var t,r=[];for(At.test(l.charAt(_))?(t=l.charAt(_),_++):(t=f,0===L&&P(Lt));t!==f;)r.push(t),At.test(l.charAt(_))?(t=l.charAt(_),_++):(t=f,0===L&&P(Lt));return r}function jr(){var t,r,e,n,o=_,a=_;if(L++,t=function(){var t;(t=Or())===f&&(t=Pr());return t}(),L--,(a=t===f?void 0:(_=a,f))!==f){if(t=_,pt.test(l.charAt(_))?(r=l.charAt(_),_++):(r=f,0===L&&P(St)),r!==f){for(e=[],C.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(y));n!==f;)e.push(n),C.test(l.charAt(_))?(n=l.charAt(_),_++):(n=f,0===L&&P(y));t=r=[r,e]}else _=t,t=f;o=t!==f?(w=o,z(t)):(_=o,f)}else _=o,o=f;return o}function Or(){var t,r,e,n=_;return l.substr(_,4)===Q?(t=Q,_+=4):(t=f,0===L&&P(Ft)),(n=t!==f&&(r=_,L++,C.test(l.charAt(_))?(e=l.charAt(_),_++):(e=f,0===L&&P(y)),L--,(r=e===f?void 0:(_=r,f))!==f)?(w=n,null):(_=n,f))===f&&(n=_,l.substr(_,4)===V?(t=V,_+=4):(t=f,0===L&&P(jt)),n=t!==f&&(r=_,L++,C.test(l.charAt(_))?(e=l.charAt(_),_++):(e=f,0===L&&P(y)),L--,(r=e===f?void 0:(_=r,f))!==f)?(w=n,null):(_=n,f)),n}function Pr(){var t,r,e,n=_;return l.substr(_,4)===W?(t=W,_+=4):(t=f,0===L&&P(Ot)),(n=t!==f&&(r=_,L++,C.test(l.charAt(_))?(e=l.charAt(_),_++):(e=f,0===L&&P(y)),L--,(r=e===f?void 0:(_=r,f))!==f)?(w=n,!0):(_=n,f))===f&&(n=_,l.substr(_,4)===X?(t=X,_+=4):(t=f,0===L&&P(Pt)),(n=t!==f&&(r=_,L++,C.test(l.charAt(_))?(e=l.charAt(_),_++):(e=f,0===L&&P(y)),L--,(r=e===f?void 0:(_=r,f))!==f)?(w=n,!0):(_=n,f))===f)&&(n=_,l.substr(_,5)===Y?(t=Y,_+=5):(t=f,0===L&&P(Rt)),(n=t!==f&&(r=_,L++,C.test(l.charAt(_))?(e=l.charAt(_),_++):(e=f,0===L&&P(y)),L--,(r=e===f?void 0:(_=r,f))!==f)?(w=n,!1):(_=n,f))===f)&&(n=_,l.substr(_,5)===tt?(t=tt,_+=5):(t=f,0===L&&P($t)),n=t!==f&&(r=_,L++,C.test(l.charAt(_))?(e=l.charAt(_),_++):(e=f,0===L&&P(y)),L--,(r=e===f?void 0:(_=r,f))!==f)?(w=n,!1):(_=n,f)),n}if((r=N())!==f&&_===l.length)return r;throw r!==f&&_<l.length&&P({type:"end"}),Er(vr,e<l.length?l.charAt(e):null,e<l.length?yr(e,e+1):yr(e,e))}}}(),parse=(peggyParser.SyntaxError.prototype.name="PeggySyntaxError",peggyParser.parse),PeggySyntaxError=peggyParser.SyntaxError;exports.default=parse;